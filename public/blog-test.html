<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Manager Test - imgtojpg.org</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-900 mb-8">Blog Manager Test Page</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Authentication Status -->
            <div class="bg-white p-6 rounded-lg shadow-sm border">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Authentication Status</h2>
                <div id="authStatus" class="space-y-2">
                    <!-- Status will be populated by JavaScript -->
                </div>
                <button id="checkAuthBtn" class="mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                    Check Status
                </button>
            </div>
            
            <!-- Quill.js Test -->
            <div class="bg-white p-6 rounded-lg shadow-sm border">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Quill.js Test</h2>
                <div id="quillStatus" class="space-y-2">
                    <!-- Status will be populated by JavaScript -->
                </div>
                <button id="testQuillBtn" class="mt-4 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                    Test Quill.js
                </button>
            </div>
            
            <!-- LocalStorage Test -->
            <div class="bg-white p-6 rounded-lg shadow-sm border">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">LocalStorage Test</h2>
                <div id="storageStatus" class="space-y-2">
                    <!-- Status will be populated by JavaScript -->
                </div>
                <button id="testStorageBtn" class="mt-4 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700">
                    Test Storage
                </button>
            </div>
            
            <!-- Quick Actions -->
            <div class="bg-white p-6 rounded-lg shadow-sm border">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Quick Actions</h2>
                <div class="space-y-3">
                    <a href="/blog-login.html" class="block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-center">
                        Go to Login
                    </a>
                    <a href="/blog-manager.html" class="block bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-center">
                        Go to Blog Manager
                    </a>
                    <button id="clearAuthBtn" class="w-full bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700">
                        Clear Authentication
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Test Results -->
        <div class="mt-8 bg-white p-6 rounded-lg shadow-sm border">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">Test Results</h2>
            <div id="testResults" class="space-y-2 text-sm">
                <!-- Results will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Test functions
        function checkAuthentication() {
            const auth = localStorage.getItem('blogAuth');
            const user = localStorage.getItem('blogUser');
            const status = document.getElementById('authStatus');
            
            status.innerHTML = `
                <p><strong>Auth Token:</strong> <span class="${auth === 'true' ? 'text-green-600' : 'text-red-600'}">${auth || 'Not set'}</span></p>
                <p><strong>User:</strong> <span class="${user ? 'text-green-600' : 'text-red-600'}">${user || 'Not set'}</span></p>
                <p><strong>Status:</strong> <span class="${auth === 'true' && user ? 'text-green-600' : 'text-red-600'}">${auth === 'true' && user ? 'Authenticated' : 'Not Authenticated'}</span></p>
            `;
            
            addTestResult('Authentication check completed');
        }
        
        function testQuillJS() {
            const status = document.getElementById('quillStatus');
            
            // Try to load Quill.js
            const script = document.createElement('script');
            script.src = 'https://cdn.quilljs.com/1.3.6/quill.min.js';
            script.onload = function() {
                if (typeof Quill !== 'undefined') {
                    status.innerHTML = '<p class="text-green-600">✅ Quill.js loaded successfully</p>';
                    addTestResult('Quill.js loaded successfully');
                } else {
                    status.innerHTML = '<p class="text-red-600">❌ Quill.js failed to load</p>';
                    addTestResult('Quill.js failed to load');
                }
            };
            script.onerror = function() {
                status.innerHTML = '<p class="text-red-600">❌ Quill.js failed to load (network error)</p>';
                addTestResult('Quill.js failed to load (network error)');
            };
            document.head.appendChild(script);
        }
        
        function testLocalStorage() {
            const status = document.getElementById('storageStatus');
            
            try {
                localStorage.setItem('test', 'test-value');
                const testValue = localStorage.getItem('test');
                localStorage.removeItem('test');
                
                if (testValue === 'test-value') {
                    status.innerHTML = '<p class="text-green-600">✅ LocalStorage working correctly</p>';
                    addTestResult('LocalStorage working correctly');
                } else {
                    status.innerHTML = '<p class="text-red-600">❌ LocalStorage not working correctly</p>';
                    addTestResult('LocalStorage not working correctly');
                }
            } catch (error) {
                status.innerHTML = `<p class="text-red-600">❌ LocalStorage error: ${error.message}</p>`;
                addTestResult(`LocalStorage error: ${error.message}`);
            }
        }
        
        function clearAuthentication() {
            localStorage.removeItem('blogAuth');
            localStorage.removeItem('blogUser');
            addTestResult('Authentication cleared');
            checkAuthentication();
        }
        
        function addTestResult(message) {
            const results = document.getElementById('testResults');
            const timestamp = new Date().toLocaleTimeString();
            const resultDiv = document.createElement('div');
            resultDiv.className = 'p-2 bg-gray-100 rounded';
            resultDiv.innerHTML = `<span class="text-gray-500">[${timestamp}]</span> ${message}`;
            results.appendChild(resultDiv);
        }
        
        // Bind events
        document.getElementById('checkAuthBtn').addEventListener('click', checkAuthentication);
        document.getElementById('testQuillBtn').addEventListener('click', testQuillJS);
        document.getElementById('testStorageBtn').addEventListener('click', testLocalStorage);
        document.getElementById('clearAuthBtn').addEventListener('click', clearAuthentication);
        
        // Run initial checks
        checkAuthentication();
        testLocalStorage();
        addTestResult('Test page loaded');
    </script>
</body>
</html>
