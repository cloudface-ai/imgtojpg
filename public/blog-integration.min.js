class BlogIntegration{constructor(){this.posts=[],this.categories=[],this.init()}init(){console.log("Blog Integration initializing..."),this.loadBlogData(),this.renderBlogPosts(),this.setupEventListeners(),console.log("Blog Integration ready")}loadBlogData(){try{var e=localStorage.getItem("blogPosts"),t=(e&&(this.posts=JSON.parse(e),console.log(`Loaded ${this.posts.length} posts from blog manager`)),localStorage.getItem("blogCategories"));t&&(this.categories=JSON.parse(t),console.log(`Loaded ${this.categories.length} categories from blog manager`)),this.posts=this.posts.filter(e=>"published"===e.status),console.log(this.posts.length+" published posts found")}catch(e){console.error("Error loading blog data:",e),this.posts=[],this.categories=[]}}renderBlogPosts(){var e,t=document.getElementById("blogPostsContainer");t?0===this.posts.length?this.showDefaultPosts():(e=this.posts.sort((e,t)=>new Date(t.publishDate||t.createdAt)-new Date(e.publishDate||e.createdAt)),t.innerHTML=e.map(e=>this.createPostHTML(e)).join(""),this.addAdminLink()):console.error("Blog posts container not found")}createPostHTML(e){var t=new Date(e.publishDate||e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),s=e.categories?e.categories.split(",").map(e=>e.trim()):[],o=e.tags?e.tags.split(",").map(e=>e.trim()):[],a=s.map(e=>`<span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">${e}</span>`).join(""),o=o.map(e=>`<span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">${e}</span>`).join(""),n=this.getExcerpt(e.content,200),l=this.getCategoryIcon(s[0]||"general");return`
            <div class="adobe-card p-6 mb-8 hover-fade-up cursor-pointer" onclick="window.open('/blog-post.html?id=${e.id}', '_blank')">
                <div class="flex flex-col lg:flex-row gap-6">
                    <div class="lg:w-1/3">
                        ${e.featuredImage?`
                            <div class="bg-gradient-to-br from-blue-100 to-indigo-100 rounded-lg overflow-hidden">
                                <img src="${e.featuredImage}" alt="${e.title||"Blog Post"}" class="w-full h-48 object-cover">
                                <div class="p-4 text-center">
                                    <p class="text-sm text-gray-600">${s[0]||"Blog Post"}</p>
                                </div>
                            </div>
                        `:`
                            <div class="bg-gradient-to-br from-blue-100 to-indigo-100 rounded-lg p-8 text-center">
                                <div class="text-4xl mb-4 hover-pulse">${l}</div>
                                <p class="text-sm text-gray-600">${s[0]||"Blog Post"}</p>
                            </div>
                        `}
                    </div>
                    <div class="lg:w-2/3">
                        <h3 class="text-xl font-semibold text-gray-900 mb-3">${e.title||"Untitled Post"}</h3>
                        <p class="text-gray-600 mb-4">${n}</p>
                        <div class="flex flex-wrap gap-2 mb-4">
                            ${a}
                            ${o}
                        </div>
                        <p class="text-sm text-gray-500">Published on ${t}</p>
                        <div class="mt-4">
                            <span class="text-blue-600 font-medium hover:text-blue-800 transition-colors">Read More ‚Üí</span>
                        </div>
                    </div>
                </div>
            </div>
        `}getExcerpt(e,t){return e?(e=e.replace(/<[^>]*>/g,"")).length<=t?e:e.substring(0,t)+"...":"No content available."}getCategoryIcon(e){if(e){var t,s,o=e.toLowerCase();for([t,s]of Object.entries({"image conversion":"üñºÔ∏è",photography:"üì∑",tutorials:"üìö",tips:"üí°",heic:"üì±",png:"üñºÔ∏è",webp:"üåê",tiff:"üìÑ",raw:"üì∏",general:"üìù"}))if(o.includes(t))return s}return"üìù"}showDefaultPosts(){var e=document.getElementById("blogPostsContainer");e&&(e.innerHTML=`
            <!-- Blog Post 1: HEIC to JPG Guide -->
            <div class="adobe-card p-6 mb-8 hover-fade-up cursor-pointer" onclick="openBlogPost('heic-guide')">
                <div class="flex flex-col lg:flex-row gap-6">
                    <div class="lg:w-1/3">
                        <div class="bg-gradient-to-br from-blue-100 to-indigo-100 rounded-lg p-8 text-center">
                            <div class="text-4xl mb-4 hover-pulse">üì±</div>
                            <p class="text-sm text-gray-600">HEIC Conversion</p>
                        </div>
                    </div>
                    <div class="lg:w-2/3">
                        <h3 class="text-xl font-semibold text-gray-900 mb-3">Complete Guide: Converting HEIC to JPG</h3>
                        <p class="text-gray-600 mb-4">
                            Learn everything about HEIC files and how to convert them to JPG format. HEIC (High Efficiency Image Container) is Apple's modern image format that offers better compression than JPEG while maintaining quality.
                        </p>
                        <div class="flex flex-wrap gap-2 mb-4">
                            <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">heic</span>
                            <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">conversion</span>
                            <span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded">tutorial</span>
                        </div>
                        <p class="text-sm text-gray-500">Published on January 15, 2025</p>
                        <div class="mt-4">
                            <span class="text-blue-600 font-medium hover:text-blue-800 transition-colors">Read More ‚Üí</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Blog Post 2: Image Format Comparison -->
            <div class="adobe-card p-6 mb-8 hover-fade-up cursor-pointer" onclick="openBlogPost('format-comparison')">
                <div class="flex flex-col lg:flex-row gap-6">
                    <div class="lg:w-1/3">
                        <div class="bg-gradient-to-br from-green-100 to-blue-100 rounded-lg p-8 text-center">
                            <div class="text-4xl mb-4 hover-pulse">üñºÔ∏è</div>
                            <p class="text-sm text-gray-600">Format Guide</p>
                        </div>
                    </div>
                    <div class="lg:w-2/3">
                        <h3 class="text-xl font-semibold text-gray-900 mb-3">JPG vs PNG vs WebP: Which Format Should You Use?</h3>
                        <p class="text-gray-600 mb-4">
                            Understanding the differences between popular image formats can help you choose the right one for your needs. Each format has its strengths and ideal use cases.
                        </p>
                        <div class="flex flex-wrap gap-2 mb-4">
                            <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">formats</span>
                            <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">comparison</span>
                            <span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded">guide</span>
                        </div>
                        <p class="text-sm text-gray-500">Published on January 12, 2025</p>
                        <div class="mt-4">
                            <span class="text-blue-600 font-medium hover:text-blue-800 transition-colors">Read More ‚Üí</span>
                        </div>
                    </div>
                </div>
            </div>
        `)}addAdminLink(){var e,t=document.querySelector(".container-responsive.text-center");t&&!document.getElementById("adminLink")&&((e=document.createElement("div")).className="mt-6",e.innerHTML=`
                <a href="/blog-manager.html" class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                    </svg>
                    Manage Blog Posts
                </a>
            `,t.appendChild(e))}openBlogPost(t){var e,s,o,a=this.posts.find(e=>e.id==t);a?(e=document.getElementById("modalTitle"),s=document.getElementById("modalContent"),o=document.getElementById("blogModal"),e&&s&&o&&(e.textContent=a.title||"Untitled Post",s.innerHTML=a.content||"<p>No content available.</p>",o.classList.remove("hidden"),document.body.style.overflow="hidden")):console.error("Post not found:",t)}setupEventListeners(){window.addEventListener("storage",e=>{"blogPosts"!==e.key&&"blogCategories"!==e.key||(console.log("Blog data updated, refreshing..."),this.loadBlogData(),this.renderBlogPosts())}),setInterval(()=>{this.loadBlogData(),this.renderBlogPosts()},3e4)}refresh(){this.loadBlogData(),this.renderBlogPosts()}}document.addEventListener("DOMContentLoaded",()=>{window.blogIntegration=new BlogIntegration}),"undefined"!=typeof module&&module.exports&&(module.exports=BlogIntegration);