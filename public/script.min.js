function showResults(e){var t=document.getElementById("results");let d=document.getElementById("imageContainer");e.forEach(e=>{var t=document.createElement("div"),n=document.createElement("img"),n=(n.src="/converted/"+e,t.appendChild(n),document.createElement("a"));n.href="/converted/"+e,n.download=e,n.textContent="Download",n.className="download-link",t.appendChild(n),d.appendChild(t)}),t.classList.remove("hidden")}document.getElementById("uploadForm").addEventListener("submit",async function(e){e.preventDefault();e=document.getElementById("uploadProgress");let n=document.getElementById("convertProgress"),d=document.getElementById("uploadBar"),o=document.getElementById("convertBar"),l=document.getElementById("uploadStatus"),s=document.getElementById("convertStatus");var t=document.getElementById("imageContainer"),a=document.getElementById("results"),e=(e.classList.remove("hidden"),d.style.width="0%",l.textContent="Uploading...",n.classList.add("hidden"),a.classList.add("hidden"),t.innerHTML="",new FormData(this));let r=new XMLHttpRequest;r.open("POST","/convert"),r.upload.addEventListener("progress",function(e){e.lengthComputable&&(e=e.loaded/e.total*100,d.style.width=e+"%")}),r.onload=async function(){d.style.width="100%",l.textContent="Upload complete. Starting conversion...",n.classList.remove("hidden"),o.style.width="0%",s.textContent="Converting...";let e=0,t=setInterval(()=>{e+=10,o.style.width=e+"%",100<=e&&(clearInterval(t),s.textContent="Conversion done.",showResults(JSON.parse(r.responseText)))},200)},r.send(e)});